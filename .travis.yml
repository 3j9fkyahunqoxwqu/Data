language: php
sudo: false

branches:
  only:
  - master

env:
  global:
  - secure: R7pwWjJYMSeYEmJOxS+9r/PxGBUY+ihsWFTr+PkciwC/6G9N3eCopSCJSHilwgklJfOD9DEqXS0HKiDDeSXM4c+vArXewHsuUC6Zoyf9CCk3FmDaCyox6189YjumtlqnNK4eijn3f2bKkLURs+zYyedP6sHbXoJM8wwzVl2T36EUaMUsIeLOiDgfEFFV1iQncPV5HKseyNYTB1uMqjasAuMxy2qJurD9+qXOiH8B94b73XkwqhXXZo9DpN8KAJm8hABw7BRosxxCBR7TB7vbISZ4hGid1fG4DrCfe5vWL+4adiFQbO2/PVQ5BxZYnLU45xoyfpINQTvIoBEjQqJhOb+A1NoiGpumsC5+jtXJYx2DlZRZ+cv7JSWHnw6O4ApBlGP9zJ14Ap/ckoVmTfSIho+3WsfqrcGpSQc/EZV9YFuzOhfqSGfcdZvntLvoi/Ybs0EMFzaQcEUww+6s20C8yt1WAzzgUzeSFUwCnlfNyTGgh+ZtP8x6XrMz4B8kltC2wHsbzsdcazrSfuE4NezPHXeQbSprbdLzdfQQ/NkUk2GvdQabSJeAzeJAuNKPch30EzdxJ8Cjw4l5i0GPxaCg/46Dk4HCgwJt3r8nUthRVAfo8ek5ED3IoRlJ5oW3GMC1kHve0oTD6OZV4Uy+0gRjHJ/EcqO6CuoYrG4acBFnTb0=
  - secure: Ct9i/8ZynLJccpxlN+3tWdJ2jbWnSHGsYJqi7UA4mkEtxnO7ffLcHD/+gauKJsMphHt2COuZ3fN15G3/jKhzGFFMfKTUoGhaX5UmH/0aPl3uo9l7Pf1gdycvSfgHBb8i1TrOGZin4GFrPpY9vX8mPKw13d2Rv38hDEeiXJYUQ1fiGuBpn6xPjF9KEmFpeYT8JAslKiUAB6MMp+Rwctb4IABr6tQFPhlW3JC+d9geI0XPrniOKfzUp/89xOI3UdUqzM06DT0oVHGhHXHRzzpAjHiBWT5cmHxIHtdRyyOO7a/MGwvmPaOggsx05hetBPbEgNvOgMUNtU0utWggInD2dkyNGikYS+4dFRId+1uy7TZS3qNM5RvZ7IQ7WXrLxnF9Ugty1jyhCZYl9v06JQpPhm7seRLVzYj1SG9P+M5LpXpXmIAONCnf7DHZvD8qTWMR3KnFR8mKZPN4AUOuU5y6wUI7meIMPCRXAUbIO7wEHjSjaHPhNugLkhltkgb4eVUMfHekBow3V8ZWL+r727kxwOxZkwep2BjrQQmLMCYuJ4mIYxzWIWbqBvlgejbV8OaPUn63S+f5BXe264jDFgbyXR46XQKFUqc2RfkssOEPE9PlEibDLtyvPjdcex6QCdCTK0DIA56eaLmU+pUqFoqPhsRWgF9lw1BJgww+/z3Ypd8=
  - secure: XLZOBHm39Sb5WAUvt0NAQYOoatGa0vid1XFC77Ep3qKrGRqoI4x6+b/1prlc+rP/hk/TE+okniyyYsj9gXKQEguBuUh+IQ8flus2Zp9r8NQr4Q8Cg6g5xz7M1yB6K1IRJFCWLl+8FHhRm34Dp8ynTVMn0k9lSSPSS2qgdMG3Ukr6+iZ1zLMpD2SxAZvtMhySvvwmjZZXhbsuywX1PQuCXjcPZTWQ4lwHWzN6U2rYglTipb/4k04Sk8TYmkKS4jUu8X/LuVBag0hzTAgHXGS6HqsC94xS1rWT/+zsp1M7vsKr0fnd6YtXBAJbCu5oDToCirlhVgMXqfTYmax+E3W5juDdHXOTjZ7myEUX5D/EyCNkzix0cfLTJqRA08prsVVSYBLwfreJ4NUiByyMVOMtDDXvGLZi7WzhtZ2ZkI8qq4LGMCU+I5M30zOGe9FQNYJL6VS7WX0utFAG122jrmyyrR0NU43BpG+NcBG0PVsL8I3lds5O+SQ2BXU2/Hn/Ybkp0fVIYK9iaF+NwlP5VM8ZyA1okTfkCjL6/CWbujmfif+ANdUUQ851I2blti4LX9HZwjuKCyYOUQXy7baGRBjLlEtIeqmheKQkK87ZwjfsPkPgG4yJUs/jju8X3ldt81twtMWCr4nWYJhU+zbXQRcKlBZyBMYW+fkYKsyeYlxS2HM=
  - secure: BmRoEoxPupFSmqW3qqscLap99y+SKuyvMiAw6sSwIoA1q/defx67Yon43VuQd2XXcZqXyUQE4BOJeSryNji8oktJ3sN/0mB7Xiu8EfSAPBrvyacB+Szwl88Mssa7VQfpA1VpsJh3TPgr9K9WuGRC4z8L74tsoJAvp6/SMrRiHSJjsqzdFuJFhAnRtpPuLpxYJVot/Esih70JLP2yR27AEFPvKzqI/r9/6aMiZ5VLV2CJmlkFSogZfFXKrsyMMGv7qT1agHD2oohqbdSRY7a4zoPmE42T+95MF40uNhI7yEqn24rbBcT4cHl0i2Fi7jQ7w7qPUktI798Zsul9aSl5n78Guo3JT5VGe1tFRiSBoqIjNYzuQl4OVPQIUAgZ+/or1HQySt9L98ilvSVKCC1CD8Dq1bw8AjYbTez+q/I0O0hqqs3oSo6iiNnjwHTp+05Y6pn3W1VHgHviTNxaXflH3/FWtyb96ftSQEcQuCCCbcL4o4WY8p5SLhTE9LGMFz6zLC6RcJ8+e1yMvNHHaAnzJcbxFPZkCvWxsJzX91FmfC6GyBRJjYO4rfPXF/vPtb0Wy7O4fP13FfJWRApz7SgcT3jC1asox+tSTRiWtlhxoWtZNntKt81zqFti+gNSHmFATSG1Zlnwq4MCCDd+1RJdAjVsStiBlcYd0/rKF4Vw4pE=
  - secure: WmNlo356A+WvnRlnIvsN8Aqu13WrTEK2tlnCUyi92Tpy9J6DGgVWil4trbtDwCeHxMsVzyt74Nxb+jYA4wdfeXhQQUC6BXoHg5kNpqUF/3C5zI6sgfzvnjKjGjEcyJun4O6jQq0vmeJj2q5H87iRmWRsovFOGYkRMdNkrL4Yxgo8tSkUDKxEdyjMcrMmV3MJJbeHkWRDuaNk3ZfztF25xdoqHA0SdIngqHNG9wMSXasWPc7KCbNnr/eiDkGE3atQe5Mys7x7brqWDZKxJAPNRVvBFBevBnlfolJOmRbxDr/4jmNnmroxwVmP1Yyk9DlZJ81AKjkMy/qcklwoBFsw0Sl1UyNRwfSxC4SK/DQabFJLohn2l1NY2nhAUHPtCBJ6bJCeYpLXlQRAbq6WT2eeXvC15KZ66MVzWbcp0ihu3kPOwkEogoeeFYlxK2gIV08izva0xl8uljKycUcfQRkgJzqeuajs0hN5yTdp+GSdf/OMTAbG8X8aJf5P5khx7WczYkTzr9tWt3ZDcw+/OzClaS9Igd/Het6mTqkRAYC4BUubmgutHdSe+L5BCY6mMg8wfELxTwuRcYAdWx2ke7ROYgscuH+nsPwMgFR8R3ykir4w5CfTqTgkJUD3lj35snjoYr8rcN4H2BC50SfYWi2I8IKz60d8L7lEvRMC9Q9UKsE=
  - secure: IavGZWFjEmNpR80YnLX7AlRci0Szk1HeFzK6OIdVYcYbdMJMTZLgiSnTUPS7MNuWjYDjNXNGRqun8BHIb60PULpQwR+5rU0yOXnZxt3k3jAGBNlQ1mNut1xriS1YmwuZLk5SyD33kVEyIuTNhNoWbg3FXn53VNDtMpqe/wuMXIUYJmm4Sj2ilZB9+RumrgPKmvDfr5NF/hd+F6RLCgpdAah4hB5y+2nprdgM72f+i8RhCHoV4APJPQXUvlAs6lSWkpHey/K7Wm9PP/cbmXVXKAEQy3duaA4NC1dO718g+m2orrN5ebo4iKClc9hcCdZdBEE3eEDLgaFauxFIOGxI2+OlbsvruY4Q5sN0mog/mKsVljzPJobbLqApnXtZi0DVTY7KlIeA7b1nh3g7I17HxCCzkw32TL0U6xA9B08wAuv2eF7KSVs0EFATavjcHej+DoznbURpekXugpXF0IOHfPwNgjdmqDPNIQgG+4gF++hBUBuMnEKy6Idw5/37PYBFDzB6Q8Cicu+/C1rQPuoEWFuIcmm3sY6uC/qFy+uni5iUzca4+9C2IEDkAropAvkMPb+v5lU8245SyEFizN0erRvYy2Xn00m0/kIvefn8Zs74lMWP0lqr3TkZ8RC3CM42ZdZjSASXIkYxLpXqLniNv0EpJktB4OuWMS4vf4LnlR8=
  - secure: Y+G7jgLtcQMcEMVx+qg6rJ2yysNqhxd3i4zzCmSo/26ByY3PEhaTHxqtjnEG15wxqBv2ILIwScQZUQ4MaWn6OZbwJcVc+ClyB+F4y8rZPDJGtMlT//OCeqiyppXFHX4T8Vfj3X+A4sCAgTVfZB5uR88qktfyp7FtqniMyGp+r6bwSmBeOmSwJr6Ut8YXs1xiCC2SmUXS+Uru3nMkGdIC5CN6rv3sNOakR9HsNNV3CYcBZp8rQgm0Zd+4DV8UNgTFDPaYcALa75PdFLFMSQ38isN6PbcISOpoKNmH6yRWfSCqmtSi3O6dfHTlrJVplq2h4IQgFRlH5AKM0MKL4IyPGqCFbHm5EUzdoGZrInmR9jNtU7+dEbgbPJt9EXF6y7EGtKXpaPCAkkENLY1Ce8oat1dQcVBx005JhqDeqGacA552A+W80MGuVmxj2WB8OfPz9sAX6VxKBUgrY2iVI2V6RwNHslwqWzxZwSwBJ1DiNXTcrFwxPq3OGIKiDOpi1h23P6zrW1aL8rx/MVY1G7w6eyFvx8TJaBGKdIbNo/mI2wRjJnC2ZXHu9q6ccRcac37yQuFdbVWZbJE1hRJnKrnhxfk0jD03IB1yMlFFCVmI+ANlO2icydiOLAumFK718/IJTAVXCAq5cCZTJ+0rT+il71z1UIxcgetGJGkp57IDckg=
  - secure: E0kCOyJRyh0aP2MvwRqNkRr6ZWOyAd0AUDV0MO74f0Aot1l5rfWqdAWPwkHgvRUst5RObJjVSjObglZE4oKujnwjgm3BFJabO5VTk157TB3J1Ew60vHIiN1u2x7u2rlOhyqdKto9K59sQYIIsjaUJT5eQJ+LESKOvBjjewJpnVlhuymPH98u+IHdkieCWsovvuhg8TptnOI05HuDIGtVxxV004KXCX2r039FE7iAW5//v3EhgxcKAjO0hlEcQ9ngBC0iL/3uJMX7tke6X2tomNTB6tuQdK0bR39NfIO6g2+SQCs8wRTAgn5ZC6Gt5IDJDPQrftD0x7LEi2YccAyJxPXieYicEWt78O2JtLq+CoRCNDMCB6M4Cpiyx3XtKnNjWnlz2tnyqiu7+BR6x7NaD9UvBQdeQo3QbVAI7werEkVAkYLI3ZCYGgJ77Fz0B7TpDuiRD1M64UcGB87x6ctS13LQ1gNzT/L/ACstna0S0l4S3qeZ125u8BjB6hn7/vpwnqNY0A9YukO8GlIMjae8dM6hzu1xCaAeM1mT63d7p5wSkhoIKqb6ZEGGpCgoZzfJL3rUBytSfBJCaqMHOlINg6n4BzOpIIdWWZII5FjhLbVeBpCKs/AjW8cC9Q+Yp3j5I1sD3QAEqHOV9cDEAF7/zoNDDNBFKgqy4G/wYb4zSB4=
  - secure: QWzaAehV0Ls39GIROFm5l8JKrxtqjKAxM4hTH3MybA9WzWnbhYjM5qMoumDru3i7lmXrEeqewbt7aeKzTUkCwHFMqIlmGXdc6kUVFpZJBlZ94pavTJIc8Gs9ycWzHg72XBOkBbpnu9gFn/hEGnKaawMEoQL85Z4A8c9TxdsTzyXTfYEN3PhHFJHbpcQtlCyHiuAqNOQNOXR3rPaSArHvXkXhPTqnB/tBZ9wyYa5N7rjQPA0HZL+/FEP0BGtYjkCz2zwzbmtwoPUR9T7rIv8FdYP5F+Sd7uGvF/I34wRqMQw4St80tYwG51DLRNCeT8tvusMv5ipTX1wvTp4APxl2JFXsLDsaKHQOtJcHLytCDsRHQ7IMCCzIfGS9bw/j/yT5E6wkqWcV3JYyLTFrCBVsLMeHC0tfBidmoC8IOYjhOUJabdL6L1lBxlgql1o+P0OrOImyPsKWVIk5ewRHInce94c29XRoCkN2pk7DVwnBIleOq7dAGiTSZy0vPEbRZ2jVBdu8gX82h0OVts6bJDJCu7li6ArilO+bjUnCWs8QrlI7YHxt6IyrNuDwks/JXBLz8nRGr+PpaIOq+58NLZlwuMFc3lAK7BjXA1k58zShE0hRbEN+0DeOZRSP3m8Knok6FCVaRI1zkBMaXJ2OpAQ3ovyJj34J6+n4XjDU5Z20j4k=

addons:
  apt:
    packages:
    - sshpass

script:
- php bin/generate.php > data.sql

after_script:
- export SSHPASS=$DEPLOY_PASS
- sshpass -e scp -o stricthostkeychecking=no data.sql $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_PATH_ALPHA/other
- sshpass -e ssh -o stricthostkeychecking=no $DEPLOY_USER@$DEPLOY_HOST "cat $DEPLOY_PATH_ALPHA/other/data.sql | mysql -u $MYSQL_USER --password=$MYSQL_PASS $MYSQL_DB"
